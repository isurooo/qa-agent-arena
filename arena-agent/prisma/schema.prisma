// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Tool {
  id        Int        @id @default(autoincrement())
  name      String
  url       String
  version   String
  category  ToolCategory
  arenaRuns ArenaRun[]
}

model ArenaRun {
  id                     Int            @id @default(autoincrement())
  toolId                 Int
  tool                   Tool           @relation(fields: [toolId], references: [id])
  status                 RunStatus
  stability_score        Int
  hallucination_detected Boolean
  raw_logs               Json
  video_url              String?
  benchmarkId            Int
  benchmark              Benchmark      @relation(fields: [benchmarkId], references: [id])
  verifications          Verification[]
  createdAt              DateTime       @default(now())
}

model Benchmark {
  id               Int        @id @default(autoincrement())
  scenario_name    String
  difficulty_level String
  runs             ArenaRun[]
}

model Verification {
  id          Int      @id @default(autoincrement())
  runId       Int
  run         ArenaRun @relation(fields: [runId], references: [id])
  verified_by String // Assuming admin name or ID
  notes       String?
  createdAt   DateTime @default(now())
}

model Trend {
  id                 Int      @id @default(autoincrement())
  market_sentiment   String
  tech_stack_flags   String
  createdAt          DateTime @default(now())
}

enum ToolCategory {
  AGENTIC
  LEGACY
}

enum RunStatus {
  PASS
  FAIL
}
